/*
31. Faça um programa que contenha um menu com as seguintes opções:

(a) Ler uma string S1 (tamanho máximo 20 caracteres);
(b) Imprimir o tamanho da string S1;
(c) Comparar a string S1 com uma nova string S2 fornecida pelo usuário e imprimir o resultado;
(d) Concatenar a string S1 com uma nova string S2 e imprimir na tela o resultado;
(e) Imprimir a string S1 de forma reversa;
(f) Contar quantas vezes um dado caractere aparece na string S1;
(g) Substituir a primeira ocorrência de um caractere C1 de S1 por C2;
(h) Verificar se uma string S2 é substring de S1;
(i) Retornar uma substring da string S1.

OBS: RESUMO DE TUDO QUE FOI VISTO NA LISTA DE EXERCÍCIOS DE STRINGS


// case 9: ✔️ A substring SEMPRE está contida em S1
           ✔️ Ela nunca continua fora de S1
           ✔️ Se o tamanho pedido ultrapassar S1, o código corta automaticamente


// Situação de concatenação

            Você tem o nome completo e quer só o sobrenome.

            S1 = "Maria Silva";


            Sabendo que:

            "Maria " → índices 0 a 5

            "Silva" começa no índice 6

            Substring:
            pos = 6;
            tam = 5;

*/

#include <stdio.h>   // Biblioteca padrão de entrada e saída (printf, scanf, fgets)
#include <stdlib.h>  // Biblioteca padrão (para system("pause"))
#include <string.h>  // Biblioteca de manipulação de strings (strlen, strcmp, strcat, strstr)
                     // strlen = conta quantos caracteres tem a string
                     // strcmp = compara duas string (0 = são iguais, 1 = não são iguais)
                     // strcat = concatena a segunda string após o último índice da primeira
                     // strstr = verifica se S2 está contida dentro de S1

int main()  // Função principal
{
    char S1[21];  // Declara a string principal S1 (20 caracteres + '\0' para o final da string)
    char S2[100]; // Declara uma string auxiliar S2 (usada em comparações e concatenações)
    char c1, c2;  // Variáveis para caracteres usados nas opções (f) e (g)
    int opcao;    // Armazena a escolha do usuário no menu
    int i, count, pos, tam;  // Variáveis auxiliares
                             // int i; → índice / contador de posição // int count; → contador de ocorrências //
                             // int pos; → posição inicial // int tam; → tamanho (quantidade de caracteres)
    S1[0] = '\0'; // Inicializa S1 como string vazia (sem conteúdo)
                  // Só precisa inicializar uma string se ela puder ser usada antes de receber conteúdo. por exemplo, fgets.

    // Início do laço do menu principal
    do
    {
        // Exibe o menu com todas as opções disponíveis
        printf("\n==== MENU DE OPCOES ====\n");
        printf("1 - Ler string S1 (maximo 20 caracteres)\n");
        printf("2 - Imprimir o tamanho de S1\n");
        printf("3 - Comparar S1 com uma nova string S2\n");
        printf("4 - Concatenar S1 com uma nova string S2\n");
        printf("5 - Imprimir S1 de forma reversa\n");
        printf("6 - Contar ocorrencias de um caractere em S1\n");
        printf("7 - Substituir primeira ocorrencia de um caractere em S1\n");
        printf("8 - Verificar se S2 eh substring de S1\n");
        printf("9 - Criar uma substring de S1\n");
        printf("0 - Sair\n");
        printf("========================\n");
        printf("Escolha uma opcao: ");

        scanf("%d", &opcao);  // Lê a opção escolhida pelo usuário
        getchar();            // Limpa o '\n' que fica no buffer após o scanf

        // Estrutura switch controla qual funcionalidade será executada
        switch (opcao)
        {
            case 1:  // (a) Ler a string S1
                printf("Digite a string S1: ");  // Solicita ao usuário a entrada da string
                fgets(S1, sizeof(S1), stdin);    // Lê a string, aceitando espaços

                // Remove o '\n' adicionado pelo fgets no final da string
                S1[strcspn(S1, "\n")] = '\0';
                break; // Sai do case

            case 2:  // (b) Imprimir o tamanho de S1
                printf("Tamanho de S1: %lu\n", strlen(S1)); // %lu = Ele imprime um número, e esse número é o tamanho da string.
                break;

            case 3:  // (c) Comparar S1 com uma nova string S2
                printf("Digite a string S2: ");    // Solicita S2 ao usuário
                fgets(S2, sizeof(S2), stdin);      // Lê S2 com espaços

                // Remove o '\n' adicionado pelo fgets no final da string
                S2[strcspn(S2, "\n")] = '\0';

                // strcmp() compara as duas strings:
                // 0 se forem iguais, diferente de 0 se forem diferentes
                if (strcmp(S1, S2) == 0)
                    printf("As strings S1 e S2 sao iguais.\n");
                else
                    printf("As strings S1 e S2 sao diferentes.\n");
                break;

            case 4:  // (d) Concatenar S1 e S2
                printf("Digite a string S2: ");   // Solicita S2 ao usuário
                fgets(S2, sizeof(S2), stdin);     // Lê S2 com espaços

                // Remove o '\n' adicionado pelo fgets no final da string
                S2[strcspn(S2, "\n")] = '\0';

                strcat(S1, S2);                   // Concatena S2 no final de S1
                printf("Resultado da concatenacao: %s\n", S1); // Exibe o resultado
                break;

            case 5:  // (e) Imprimir S1 de forma reversa
                printf("String S1 invertida: ");
                for (i = strlen(S1) - 1; i >= 0; i--) // Percorre a string de trás para frente
                    printf("%c", S1[i]);               // Imprime caractere por caractere
                printf("\n");
                break;

            case 6:  // (f) Contar quantas vezes um caractere aparece em S1
                printf("Digite o caractere a ser contado: ");
                scanf("%c", &c1);     // Lê o caractere informado pelo usuário
                count = 0;            // Zera o contador

                for (i = 0; i < strlen(S1); i++)  // Percorre toda a string
                    if (S1[i] == c1)              // Se o caractere for igual ao procurado
                        count++;                  // Incrementa o contador

                printf("O caractere '%c' ocorre %d vez(es) em S1.\n", c1, count);
                break;

            case 7:  // (g) Substituir a primeira ocorrência de um caractere
                printf("Digite o caractere C1 (a ser substituido): ");
                scanf("%c", &c1);     // Lê o caractere a ser substituído
                getchar();            // Limpa o buffer
                printf("Digite o caractere C2 (substituto): ");
                scanf("%c", &c2);     // Lê o caractere substituto

                for (i = 0; i < strlen(S1); i++)  // Percorre S1
                {
                    if (S1[i] == c1)  // Quando encontra a primeira ocorrência de C1
                    {
                        S1[i] = c2;   // Substitui por C2
                        break;        // Sai do laço (apenas a primeira ocorrência)
                    }
                }
                printf("String resultante: %s\n", S1);
                break;

            case 8:  // (h) Verificar se S2 é substring de S1
                printf("Digite a string S2: ");   // Solicita a string S2
                fgets(S2, sizeof(S2), stdin);     // Lê S2 com espaços

                // Remove o '\n' adicionado pelo fgets no final da string
                S2[strcspn(S2, "\n")] = '\0';

                // strstr() verifica se S2 está contida dentro de S1
                if (strstr(S1, S2) != NULL)  // NULL = nenhum endereço válido
                    printf("S2 eh substring de S1.\n");
                else
                    printf("S2 NAO eh substring de S1.\n");
                break;

            case 9:  // (i) Criar uma substring de S1
                printf("Digite a posicao inicial: ");
                scanf("%d", &pos);   // Lê a posição inicial
                
                printf("Digite o tamanho da substring: ");
                scanf("%d", &tam);   // Lê o tamanho desejado

                printf("Substring criada: ");
                for (i = pos; i < pos + tam && i < strlen(S1); i++) // Percorre o trecho escolhido  // i < strlen(S1) = garante que o tamanho pedido não ultrapasse S1
                    printf("%c", S1[i]);  // Imprime os caracteres correspondentes
                printf("\n");
                break;

            case 0:  // Opção para sair do programa
                printf("Encerrando o programa...\n");
                break;

            default: // Caso o usuário digite uma opção inválida
                printf("Opcao invalida! Tente novamente.\n");
        }

    } while (opcao != 0);  // Repete o menu até que o usuário escolha sair

    system("pause");  // Pausa o programa antes de encerrar (Windows)
    return 0;         // Retorna 0 para indicar execução bem-sucedida
}
