/*
32. Leia uma cadeia de caracteres no formato “DD/MM/AAAA” e copie o dia, mês e ano
para 3 variáveis inteiras. Antes disso, verifique se as barras estão no lugar certo,
e se DD, MM e AAAA são numéricos.
*/

#include <stdio.h>   // Biblioteca padrão para entrada e saída (printf, scanf, fgets)
#include <stdlib.h>  // Biblioteca padrão (para system("pause"))
#include <string.h>  // Biblioteca de manipulação de strings (strlen)
#include <ctype.h>   // Biblioteca para funções de verificação de caracteres (isdigit)

int main()  // Função principal do programa
{
    char data[11];  // Declara a string para armazenar a data no formato DD/MM/AAAA (10 caracteres + '\0')
    int dia, mes, ano;  // Variáveis inteiras para armazenar os valores numéricos
    int i;  // Variável de controle de laço
    int formato_valido = 1;  // Flag (indicador) para verificar se o formato é válido

    // --- ENTRADA DE DADOS ---
    printf("Digite uma data no formato DD/MM/AAAA: ");
    fgets(data, sizeof(data), stdin);  // Lê a data digitada (inclui espaços, mas aqui não deve ter)

    // Remove o '\n' (Enter) se existir
    data[strcspn(data, "\n")] = '\0';

    // --- VERIFICAÇÃO DO FORMATO ---

    // Verifica se o tamanho da string é exatamente 10 caracteres (DD/MM/AAAA)
    if (strlen(data) != 10)
    {
        formato_valido = 0;  // Formato incorreto
    }

    // Verifica se as barras '/' estão nas posições corretas (índices 2 e 5)
    if (data[2] != '/' || data[5] != '/')
    {
        formato_valido = 0; // Formato incorreto
    }

    // Verifica se todos os outros caracteres (exceto as barras) são dígitos numéricos
    for (i = 0; i < 10; i++)
    {
        if (i != 2 && i != 5)  // Ignora as posições das barras
        {
            if (!isdigit(data[i]))  // Se o caractere data[i] NÃO for um dígito numérico (0 a 9), então o formato da data é inválido.
            {
                formato_valido = 0; // Formato incorreto
                break;  // Sai do laço se encontrar algo errado
            }
        }
    }

    // Se o formato não for válido, exibe mensagem de erro e encerra
    if (!formato_valido)
    {
        printf("Formato invalido! Use o formato DD/MM/AAAA com apenas numeros.\n");
        system("pause");
        return 0;  // Encerra o programa
    }

    // --- CONVERSÃO PARA INTEIROS ---

    // Extrai o dia (2 primeiros caracteres)
    dia = (data[0] - '0') * 10 + (data[1] - '0');  // Converte de char para int
    // Exemplo: '2' - '0' = 2 → (2 * 10) + 5 = 25

    // Extrai o mês (caracteres 3 e 4, após a primeira barra)
    mes = (data[3] - '0') * 10 + (data[4] - '0');

    // Extrai o ano (caracteres 6 a 9)
    ano = (data[6] - '0') * 1000 + (data[7] - '0') * 100 +
          (data[8] - '0') * 10 + (data[9] - '0');

    // --- SAÍDA DE RESULTADOS ---
    printf("\nData valida!\n");
    printf("Dia: %d\n", dia);
    printf("Mes: %d\n", mes);
    printf("Ano: %d\n", ano);

    system("pause");  // Pausa o programa (somente no Windows)
    return 0;         // Indica execução bem-sucedida
}
